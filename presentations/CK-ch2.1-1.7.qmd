---
title: "CourseKata Ch. 2.1–2.7"
subtitle: "Patterns & Association"
author: "Mansour Abdoli, PhD"
format:
  live-revealjs:
    slide-number: true
    incremental: false
    chalkboard: true
    preview-links: true
    code-overflow: wrap
    footer: "CourseKata Ch. 2.1–2.7"
engine: knitr
execute:
  echo: true
  warning: false
  message: false
output-files: coursekata_ch2.html
---

## Session goals  {.incremental}

::: notes
{{< include ./_extensions/r-wasm/live/_knitr.qmd >}}

```{r}
#| echo: false
#| results: 'asis'

load(file = "./data/MindsetMatters.rda")
# create a webr to read the data
source('./data/embedData.R')
cat(embedData(MindsetMatters))
```

```{webr}
#| echo: false
#| output: false
#| warning: false
#| message: false

# .webr_ready <- false
# webr_ready <- function() {
#   if (exists(".webr_ready") && isTRUE(.webr_ready)) "✅ ready" else "⏳ initializing"
# }

library(mosaic)
library(ggformula)
#library(dplyr)

# Global options
options(digits = 3)

```
```{r, echo=FALSE}
library(mosaic)
library(ggformula)
#library(dplyr)

# Global options
options(digits = 3)
```

:::


By the end of today you can:

- explain **variation** and why we organize data
- make and interpret **frequency tables** (using `tally()`)
- identify **cases** (rows) and **variables** (columns)
- explain **variable** vs **value**
- tell **categorical** from **quantitative** variables
- distinguish **measurement** vs **sampling**


# 2.1 Starting with a bunch of numbers

## Variation is the point

- Two bunches:

  - `2, 2, 2, 2, 2, 2, 2, 2, 2`
  - `2, 1, 3, 3, 2, 3, 1, 2, 1`
 
 
- We reveal patterns by **sorting** and **counting**.
- We use patterns to find <br>
  **unusual** things <br>
  exceptions <br>
  **outliers**

```{webr}
#| echo: false
#| output: true
cat('<div class="webr-footnote">', webr_ready(), '</div>', sep = "")
```

## Let's sort and tally

```{webr}
#| caption: "store numbers"
x <- c(2, 1, 3, 3, 2, 3, 1, 2, 1)
x
```

```{webr}
#| caption: "Sort"
sort(x)
```

```{webr}
#| caption: "Count (Tally)"
tally(x)
```

## Pair prompt 

```{r}
x <- c(2, 1, 3, 3, 2, 3, 1, 2, 1)
print(sort(x))
cat('\n')
tally(x)
```

- What pattern is easier to see after sorting?
  
- What does the frequency table make obvious?

# 2.2 From numbers to data

## Numbers become “data” when they represent the world   library(mosaic)


Two core processes:

- **Measurement:** turning attributes into values

\

- **Sampling:** choosing which cases to measure

## Think–Pair–Share (2 minutes)

Pick one:

- Stress and school performance
- Sleep and mood
- Screen time and attention

For your choice:

- What is one **measurement**?
- What is your **sample**?


# 2.3 A data frame example
## Example dataset (MindsetMatters)
- Houskeepr Information before and after informing some of them that their job counts as an active-lifestyle.
- What do you see?

```{webr}
#| echo: false
head(MindsetMatters)
```

## Cases, variables, values

- **Rows = cases**
- **Columns = variables**
- Each cell is a **value**

```{r, echo=FALSE}
head(MindsetMatters)
```

## Peek at structure (CourseKata-style: glimpse)
- What types of values do you see?

```{webr}
str(MindsetMatters)
```

# 2.7 Values and variables
## Variable vs value

- **Variable:** the attribute/column (e.g., `Age`)
- **Value:** one case’s measurement (e.g., `Age = 41`)
- Variables and Values in a Dataset:
```{webr}
#| caption: "A variable (many values) and one value"
MindsetMatters$Age[1:10]   # First 10 values of a variable
MindsetMatters$Age[2]      # one value
```

## Value Types
- Names: character strings, labels
- Numbers: A combination of 0 to 9 digits and symbols like . and %

```{r, echo=FALSE}
str(MindsetMatters)
```

# 2.6 Quantitative & Categorical Variables
## Variable Types
- **Variables:** 
  - Categorical: for qualitative comparison (grouping)
  - Numerical: for quantitative comparison (distance, ratio)

```{r, echo=FALSE}
str(MindsetMatters)
```


## Quick classification

- Age
- BMI
- Condition
- Zip code (in general)

```{r}
head(MindsetMatters, 3)
```

# 2.7 (again) Values
## Switching Value Types: To Factor
```{webr}
MindsetMatters$CondFactor <- as.factor(MindsetMatters$Cond)
MindsetMatters$AgeGroup <- factor(
  ifelse(MindsetMatters$Age < 35, "Under 35", "35+")
  )
head(MindsetMatters)
```

## Switching Value Types: To Numeric
```{webr}
MindsetMatters$ConditionNum <- as.numeric(MindsetMatters$Condition)
MindsetMatters$Cond2 <- as.numeric(MindsetMatters$CondFactor)
MindsetMatters$AgeGroupNumeric <- as.numeric(MindsetMatters$AgeGroup)
str(MindsetMatters)
```

# 2.4 Frequency tables and sorting data frames

## Frequency table of a categorical variable

```{webr}
#| caption: "How many cases in each condition?"
tally(~ Condition, data = MindsetMatters)
```

## Two-way tally (cross-tab)

```{webr}
tally( ~ Condition + AgeGroup, data = MindsetMatters)
```

## Sort a data frame

```{webr}
#| caption: "Sort by Age"
head(arrange(MindsetMatters Age))
```

```{webr}
#| caption: "Sort by Age"
MindsetMatters <- arrange(MindsetMatters desc(Age))
tail(MindsetMatters)
```

## Frequency Table for Numerical Variables
- Tally works on numeric but is not alwyas helpful

```{webr}
tally(MindsetMatters$Age)
```

- Grouping works better:

```{webr}
tally(MindsetMatters$AgeGroup)
```


# 2.5 Measurement

## Measurement choices affect meaning

- Units and scales (years vs months, miles vs km)
- Coding (0/1 vs labels)
- Definitions (what counts as “exercise”?)

## Example: coding vs labeling

```{webr}
#| caption: "Compare raw code vs labeled factor"
head(select(MindsetMatters, Cond, Condition), 10)
```

**Question:** Which one do you prefer: labels or Numerical Codes?

# Collaboration activity (15–25 minutes)

## “Design a dataset” (teams of 3–4)

:::{.columns}
:::{.column width="40%"}
Pick ONE scenario:

1. Sleep & performance
2. Caffeine & anxiety
3. Exercise & mood
:::
:::{.column width="60%"}
Your team must produce:

- **Cases:** what counts as one row?
- **Variables:** 4–6 columns
- Which are **categorical** vs **quantitative**
- *For Next Class:* A dataset with **25-35 rows**
:::
:::

## Share-out (fast)

Each team shares (60–90 sec):

- cases + variables
- one measurement-related concept (units? coding? definition?)
- one expected insight about data that you will collect
 


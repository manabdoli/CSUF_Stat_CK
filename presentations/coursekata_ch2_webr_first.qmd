---
title: "CourseKata Ch. 2.1–2.7"
subtitle: "Patterns & Association"
author: "Mansour Abdoli, PhD"
format:
  live-revealjs:
    slide-number: true
    incremental: false
    chalkboard: true
    preview-links: true
    code-overflow: wrap
    footer: "CourseKata Ch. 2.1–2.7"
engine: knitr
execute:
  echo: true
  warning: false
  message: false
---

## Session goals  {.incremental}

::: notes
{{< include ./_extensions/r-wasm/live/_knitr.qmd >}}

```{r}
#| echo: false
#| results: 'asis'

load(file = "./data/MindsetMatters.rda")
# create a webr to read the data
source('./data/embedData.R')
cat(embedData(MindsetMatters))
```

```{webr}
#| echo: false
#| output: false
#| warning: false
#| message: false

# .webr_ready <- false
# webr_ready <- function() {
#   if (exists(".webr_ready") && isTRUE(.webr_ready)) "✅ ready" else "⏳ initializing"
# }

library(mosaic)
library(ggformula)
#library(dplyr)

# Global options
options(digits = 3)

```
:::


By the end of today you can:

- explain **variation** and why we organize data
- distinguish **measurement** vs **sampling**
- identify **cases** (rows) and **variables** (columns)
- make and interpret **frequency tables** (using `tally()`)
- tell **categorical** from **quantitative** variables
- explain **variable** vs **value**


# 2.1 Starting with a bunch of numbers

## Variation is the point

- Two bunches:

  - `2, 2, 2, 2, 2, 2, 2, 2, 2`
  - `2, 1, 3, 3, 2, 3, 1, 2, 1`
 
 \
 
- We reveal patterns by **sorting** and **counting**.

```{webr}
#| echo: false
#| output: true
cat('<div class="webr-footnote">', webr_ready(), '</div>', sep = "")
```

## Let's sort and tally

```{webr}
#| caption: "store numbers"
x <- c(2, 1, 3, 3, 2, 3, 1, 2, 1)
x
```

```{webr}
#| caption: "Sort"
sort(x)
```

```{webr}
#| caption: "Count (Tally)"
tally(x)
```

## Pair prompt 

- What pattern is easier to see after sorting?
- What does the frequency table make obvious?

# 2.2 From numbers to data

## Numbers become “data” when they represent the world   library(mosaic)


Two core processes:

- **Measurement:** turning attributes into values

\

- **Sampling:** choosing which cases to measure

## Think–Pair–Share (2 minutes)

Pick one:

- Stress and school performance
- Sleep and mood
- Screen time and attention

For your choice:

- What is one **measurement**?
- What is your **sample**?

# 2.3 A data frame example

## Cases, variables, values

- **Rows = cases**
- **Columns = variables**
- Each cell is a **value**

## Example dataset (MindsetMatters-like, small demo)

```{webr}
#| echo: false

# MindsetMatters <- data.frame(
#   ID    = 1:18,
#   Cond  = c(1,0,0,1,1,0, 0,1,0,1, 0,1,0,1, 1,0, 0,1),
#   Age   = c(22,41,35,28,39,33, 24,45,31,29, 54,38,26,47, 32,36, 40,27),
#   BMI   = c(23.2,27.1,26.0,24.3,28.8,25.9, 22.7,30.1,24.8,23.9, 31.4,27.6,21.8,29.9, 25.1,26.8, 28.2,22.9),
#   Syst  = c(118,132,126,121,135,124, 116,140,122,119, 148,130,114,142, 125,128, 136,117),
#   Diast = c(76,84,80,78,86,79, 74,90,77,75, 92,83,72,88, 79,81, 85,73)
# )

MindsetMatters <- dplyr::mutate(
  MindsetMatters,
  Condition = factor(Condition)
)

knitr::kable(MindsetMatters)
```

## Peek at structure (CourseKata-style: glimpse)

```{webr}
glimpse(MindsetMatters)
```

# 2.4 Frequency tables and sorting data frames

## Frequency table of a categorical variable

```{webr}
#| caption: "How many cases in each condition?"
tally(~ Condition, data = MindsetMatters)
```

## Two-way tally (cross-tab)

```{webr}
#| caption: "Make an age group, then cross-tab with Condition"
MindsetMatters <- mutate(
  MindsetMatters,
  AgeGroup = ifelse(Age < 35, "Under 35", "35+")
)

tally(~ AgeGroup + Condition, data = MindsetMatters)
```

## Sort a data frame

```{webr}
#| caption: "Sort by Age"
arrange(select(MindsetMatters, ID, Condition, Age, BMI), Age)
```

# 2.5 Measurement

## Measurement choices affect meaning

- Units and scales (years vs months)
- Coding (0/1 vs labels)
- Definitions (what counts as “exercise”?)

## Example: coding vs labeling

```{webr}
#| caption: "Compare raw code vs labeled factor"
head(select(MindsetMatters, ID, Cond, Condition), 10)
```

**Prompt:** Why do labels reduce mistakes?

# 2.6 Quantitative vs categorical variables

## Two types you’ll use constantly

**Quantitative:** amount/quantity (Age, BMI, blood pressure)  
**Categorical:** group/category (Condition, AgeGroup)

## Quick classification

- Age
- BMI
- Condition
- Zip code (in general)

## Check types in R

```{webr}
#| caption: "What is each column's type?"
sapply(MindsetMatters, class)
```


# 2.7 Values and variables

## Variable vs value

- **Variable:** the attribute/column (e.g., `Age`)
- **Value:** one case’s measurement (e.g., `Age = 41`)

## Point to values

```{webr}
#| caption: "A variable (many values) and one value"
MindsetMatters$Age[1:10]   # variable values
MindsetMatters$Age[2]      # one value
```

## How many unique values?

```{webr}
#| caption: "Unique values and categories"
length(unique(MindsetMatters$Age))
levels(MindsetMatters$Condition)
```

---

# Collaboration activity (15–25 minutes)

## “Design a dataset” (teams of 3–4)

Pick ONE scenario:

1. Sleep & performance
2. Caffeine & anxiety
3. Exercise & mood

Your team must produce:

- **Cases:** what counts as one row?
- **Variables:** 4–6 columns
- Which are **categorical** vs **quantitative**
- A dataset with **8–15 rows**
- One frequency table using `tally()`
- One sorted view using `arrange()`

## Team coding space (edit together)

```{webr}
#| caption: "Team dataset builder (edit me)"

TeamData <- data.frame(
  ID         = 1:10,
  SleepHours = c(7, 6, 8, 5, 7, 9, 4, 6, 8, 7),
  ScreenTime = c(3, 5, 2, 6, 4, 2, 7, 5, 3, 4),
  QuizScore  = c(82, 76, 91, 68, 84, 95, 61, 73, 89, 85)
)

# Add one categorical variable (example):
TeamData <- mutate(
  TeamData,
  SleepGroup = ifelse(SleepHours >= 7, "7+ hours", "< 7 hours")
)

TeamData
```

```{webr}
#| caption: "Team checks: tally + arrange"
tally(~ SleepGroup, data = TeamData)

arrange(TeamData, QuizScore)
```

## Share-out (fast)

Each team shares (60–90 sec):

- cases + variables
- one measurement gotcha (units? coding? definition?)
- one tally or sorting insight

---

# Wrap-up / Exit ticket

1. In one sentence: variable vs value  
2. One example of numeric-looking categorical data  
3. Why does measurement matter before analysis?

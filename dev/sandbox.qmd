---
title: "WebR Twoâ€‘Column Reactive Slide"
format:
  live-revealjs:
    slide-number: true
    chalkboard: true
filters:
  - webr
---
{{< include ../presentations/_extensions/coatless/live/_knitr.qmd >}}

<!--
- uses **liveâ€‘revealjs**
- has a **twoâ€‘column layout**
- includes a **syntaxâ€‘highlighted CodeMirror editor**
- has a **Run button**
- shows **reactive output on the right**
- handles **errors cleanly**
- keeps all `:::` fences *inside* code blocks so nothing leaks into the slide
-->

::: columns
::: column

### Code Editor

```{ojs}
// Create a CodeMirror editor for R code
viewof code = Inputs.textarea({
  label: "Type R code here",
  value: `x <- rnorm(100)
hist(x)`,
  rows: 12,
  spellcheck: false
})
```

```{ojs}
// A Run button so the code doesn't execute on every keystroke
viewof run = Inputs.button("Run code")
```

```{ojs}
// When the user clicks Run, execute the R code in WebR
run;  // makes this cell depend on the button

// Try running the code; capture errors safely
let result;
try {
  result = await webr.runR(code);
} catch (err) {
  result = { html: `<pre style="color:red;">${err}</pre>` };
}

globalThis.result = result;
```

:::
::: column

### Output Panel

```{ojs}
// Display whatever WebR returned (plots, text, errors)
html`${globalThis.result.html}`
```

:::
:::


<!--
Ah, yes â€” that error tells me exactly whatâ€™s going on, and it has nothing to do with your code. Itâ€™s Quarto itself complaining that itâ€™s trying to treat **â€œwebrâ€ as an external JSON filter**, which only happens when Quarto **cannot find the quarto-webr extension**.

In other words:

### ðŸ‘‰ Quarto is not recognizing `webr` as a filter  
so it assumes it must be a *file* named `webr` on your system, tries to run it, and fails.

This is why you see:

> â€œCould not run â€¦/webr as a JSON filter. Please make sure the file exists and is executable.â€

That message is Quartoâ€™s way of saying:  
**â€œI donâ€™t know what `webr` is supposed to be.â€**

Letâ€™s fix that cleanly.

---

# âœ… Step 1 â€” Make sure the quarto-webr extension is installed

Run this in your terminal (not inside R):

```
quarto add quarto-ext/webr
```

You should see something like:

```
âœ“ Installed extension webr
```

If you already installed it earlier, run:

```
quarto update
```

This ensures the extension is registered.

---

# âœ… Step 2 â€” Confirm the extension is visible to Quarto

Run:

```
quarto check
```

Scroll to the bottom â€” you should see:

```
Extensions:
  webr
```

If you donâ€™t see it, Quarto will not know how to process `{ojs}` or `{webr}`.

---

# âœ… Step 3 â€” Make sure your YAML uses the correct filter syntax

Your YAML must include:

```yaml
filters:
  - webr
```

**NOT**:

- `- /webr`
- `- ./webr`
- `- webr.lua`
- `- quarto-webr`

If the filter name is wrong, Quarto again tries to run a file named â€œwebrâ€.

---

# âœ… Step 4 â€” Make sure youâ€™re rendering with the Quarto CLI

You mentioned earlier that you had to install Quarto CLI â€” that was the right move.

Now render using:

```
quarto preview yourfile.qmd
```

or inside VSCode/VSCodium:

- Command Palette â†’ â€œQuarto: Render Documentâ€
- Or click the Render button

If you try to open the HTML directly with `file://`, OJS will break â€” but `live-revealjs` automatically launches a local web server, so youâ€™re safe.

---

# â­ If you want, I can check your exact file

If you paste:

- your YAML header  
- the first 10â€“20 lines of your `.qmd`  

â€¦I can spot the issue instantly.

---

# ðŸŽ And once we confirm the extension is loading correctlyâ€¦

Iâ€™ll give you a **fully polished, productionâ€‘ready twoâ€‘column WebR + OJS template** with:

- CodeMirror editor  
- Run button  
- Error panel  
- Plot panel  
- Clean layout  
- No leaking `:::` fences  
- Works in `live-revealjs`  

Youâ€™ll have a perfect teaching slide.

Just send me your YAML or the full file and Iâ€™ll tune it precisely for your setup.
-->